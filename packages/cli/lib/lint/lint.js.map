{"version":3,"sources":["../../src/lint/lint.js"],"names":["cli","argv","eslintCli","CLIEngine","fix","extensions","ext","cwd","root","report","executeOnFiles","files","map","file","path","resolve","outputFixes","errorCount","warningCount","formatter","logger","log","getFormatter","results","exit"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;eAEe,CAACA,GAAD,EAAMC,IAAN,KAAe;AAC5B;AACA,QAAMC,SAAS,GAAG,IAAIC,iBAAJ,CAAc;AAC9BC,IAAAA,GAAG,EAAEH,IAAI,CAACG,GADoB;AAE9BC,IAAAA,UAAU,EAAEJ,IAAI,CAACK,GAFa;AAG9BC,IAAAA,GAAG,EAAEP,GAAG,CAACQ;AAHqB,GAAd,CAAlB;AAMA,QAAMC,MAAM,GAAGP,SAAS,CAACQ,cAAV,CAAyBT,IAAI,CAACU,KAAL,CAAWC,GAAX,CAAgBC,IAAD,IAAUC,cAAKC,OAAL,CAAaf,GAAG,CAACO,GAAjB,EAAsBM,IAAtB,CAAzB,CAAzB,CAAf,CAR4B,CAS5B;;AACA,MAAIZ,IAAI,CAACG,GAAT,EAAcD,kBAAUa,WAAV,CAAsBP,MAAtB,EAVc,CAW5B;;AACA,MAAIA,MAAM,CAACQ,UAAP,IAAqBR,MAAM,CAACS,YAAhC,EAA8C;AAC5C;AACA,UAAMC,SAAS,GAAGV,MAAM,CAACQ,UAAP,GAAoBR,MAAM,CAACS,YAA3B,GAA0C,EAA1C,GAA+C,SAA/C,GAA2D,WAA7E;;AACAE,qBAAOC,GAAP,CAAWrB,GAAG,CAACsB,YAAJ,CAAiBH,SAAjB,EAA4BV,MAAM,CAACc,OAAnC,CAAX;;AACAvB,IAAAA,GAAG,CAACwB,IAAJ,CAAS,CAAT;AACD;AACF,C","sourcesContent":["import { CLIEngine } from 'eslint';\nimport path from 'path';\nimport { logger } from '@chrissong/cli-utils';\n\nexport default (cli, argv) => {\n  debugger\n  const eslintCli = new CLIEngine({\n    fix: argv.fix,\n    extensions: argv.ext,\n    cwd: cli.root\n  });\n\n  const report = eslintCli.executeOnFiles(argv.files.map((file) => path.resolve(cli.cwd, file)));\n  // 自动修复\n  if (argv.fix) CLIEngine.outputFixes(report);\n  // 告警\n  if (report.errorCount || report.warningCount) {\n    // 错误警告太多就用stylish显示\n    const formatter = report.errorCount + report.warningCount > 30 ? 'stylish' : 'codeframe';\n    logger.log(cli.getFormatter(formatter)(report.results));\n    cli.exit(1);\n  }\n};\n"],"file":"lint.js"}