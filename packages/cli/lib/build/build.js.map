{"version":3,"sources":["../../src/build/build.js"],"names":["cli","argv","logger","log","process","cwd","env","Object","assign","CMD","NODE_ENV","BABEL_ENV","context","root","easyConfig","catch","err","exit"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;;;eAIe,CAACA,GAAD,EAAMC,IAAN,KAAe;AAC5BC,mBAAOC,GAAP,CAAW,iBAAX;;AAEA,yBAAQC,OAAO,CAACC,GAAR,EAAR,EAH4B,CAI5B;;AACA,QAAMC,GAAG,GAAGC,MAAM,CAACC,MAAP,CAAcJ,OAAO,CAACE,GAAtB,EAA2B;AACrCG,IAAAA,GAAG,EAAE,OADgC;AAErCC,IAAAA,QAAQ,EAAE,YAF2B;AAGrCC,IAAAA,SAAS,EAAE;AAH0B,GAA3B,CAAZ;AAMA;AACA,yBAAM;AACJL,IAAAA,GAAG,EAAEA,GADD;AAEJL,IAAAA,IAAI,EAAEA,IAFF;AAGJW,IAAAA,OAAO,EAAEZ,GAAG,CAACa,IAHT;AAIJC,IAAAA,UAAU,EAAE,6BAAcd,GAAG,CAACa,IAAlB;AAJR,GAAN,EAKGE,KALH,CAKUC,GAAD,IAAS;AAChBd,qBAAOC,GAAP,CAAWa,GAAX;;AACAZ,IAAAA,OAAO,CAACa,IAAR,CAAa,CAAb;AACD,GARD;AASD,C","sourcesContent":["import { build } from '@chrissong/cli-webpack';\nimport { loadEnv, getEasyConfig, logger } from '@chrissong/cli-utils';\n\n/**\n * 使用子进程是为了修正webpack执行的时候的process.cwd\n * 如果不正确则可能出现打包错误\n */\nexport default (cli, argv) => {\n  logger.log('🚀  正在打包,请稍等...');\n\n  loadEnv(process.cwd());\n  // 先设置环境变量，以便在配置文件中使用\n  const env = Object.assign(process.env, {\n    CMD: 'build',\n    NODE_ENV: 'production',\n    BABEL_ENV: 'production'\n  });\n\n  debugger\n  build({\n    env: env,\n    argv: argv,\n    context: cli.root,\n    easyConfig: getEasyConfig(cli.root)\n  }).catch((err) => {\n    logger.log(err);\n    process.exit(1);\n  });\n};\n"],"file":"build.js"}