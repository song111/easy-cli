{"version":3,"sources":["../../src/init/init.js"],"names":["init","cli","argv","projectName","path","resolve","cwd","name","fs","existsSync","isOverWrite","inquirer","prompt","message","chalk","cyan","type","default","logger","log","targetDir","remove","templateParams","templateBranch","tmpdirProject","templateRepo","console"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,eAAeA,IAAf,CAAoBC,GAApB,EAAyBC,IAAzB,EAA+B;AAC7B,QAAMC,WAAW,GAAGC,cAAKC,OAAL,CAAaJ,GAAG,CAACK,GAAjB,EAAsBJ,IAAI,CAACK,IAA3B,CAApB,CAD6B,CAG7B;;;AACA,MAAIC,aAAGC,UAAH,CAAcN,WAAd,CAAJ,EAAgC;AAC9B,UAAM;AAAEO,MAAAA;AAAF,QAAkB,MAAMC,kBAASC,MAAT,CAAgB,CAC5C;AACEL,MAAAA,IAAI,EAAE,aADR;AAEEM,MAAAA,OAAO,EAAG,WAAUC,gBAAMC,IAAN,CAAWb,IAAI,CAACK,IAAhB,CAAsB,QAF5C;AAGES,MAAAA,IAAI,EAAE,SAHR;AAIEC,MAAAA,OAAO,EAAE;AAJX,KAD4C,CAAhB,CAA9B;;AAQA,QAAIP,WAAJ,EAAiB;AACfQ,MAAAA,MAAM,CAACC,GAAP,CAAY,UAASL,gBAAMC,IAAN,CAAWK,SAAX,CAAsB,KAA3C;AACA,YAAMZ,aAAGa,MAAH,CAAUD,SAAV,CAAN;AACD;AACF,GAjB4B,CAmB7B;;;AACA,QAAME,cAAc,GAAG,MAAM,sCAA7B;AACA,QAAMC,cAAc,GAAG,+CAA0BD,cAA1B,CAAvB;AACA,QAAME,aAAa,GAAG,MAAM,4BAAcC,4BAAd,EAA4BF,cAA5B,CAA5B;AAEA;AACAG,EAAAA,OAAO,CAACP,GAAR,CAAYG,cAAZ,EAA4BC,cAA5B,EAA4CC,aAA5C;AACD;;eAEcxB,I","sourcesContent":["import path from 'path';\nimport inquirer from 'inquirer';\nimport which from 'which';\nimport { fs, chalk } from '@chrissong/cli-utils';\nimport cloneTemplate from './cloneTemplate';\nimport { getTemplateQues, getTemplateBranchByParams, templateRepo } from './selectTemplate';\n\nasync function init(cli, argv) {\n  const projectName = path.resolve(cli.cwd, argv.name);\n\n  // 项目重复验证\n  if (fs.existsSync(projectName)) {\n    const { isOverWrite } = await inquirer.prompt([\n      {\n        name: 'isOverWrite',\n        message: `当前文件夹已存在${chalk.cyan(argv.name)},是否覆盖?`,\n        type: 'confirm',\n        default: true\n      }\n    ]);\n    if (isOverWrite) {\n      logger.log(`\\n删除目录 ${chalk.cyan(targetDir)}...`);\n      await fs.remove(targetDir);\n    }\n  }\n\n  // 创建本地文件模板\n  const templateParams = await getTemplateQues();\n  const templateBranch = getTemplateBranchByParams(templateParams);\n  const tmpdirProject = await cloneTemplate(templateRepo, templateBranch);\n\n  debugger;\n  console.log(templateParams, templateBranch, tmpdirProject);\n}\n\nexport default init;\n"],"file":"init.js"}