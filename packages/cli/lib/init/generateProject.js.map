{"version":3,"sources":["../../src/init/generateProject.js"],"names":["template","projectName","targetDir","spinner","start","chalk","yellow","pkgPath","path","resolve","pkgJson","fs","readJson","name","writeJson","spaces","ensureDir","Promise","all","readdirSync","map","file","move","join","overwrite","stop"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA;;;;;;eAMe,OAAOA,QAAP,EAAiBC,WAAjB,EAA8BC,SAA9B,KAA4C;AACzDC,oBAAQC,KAAR,CAAc,IAAd,EAAqB,QAAOC,gBAAMC,MAAN,CAAaL,WAAb,CAA0B,KAAtD;;AACA,QAAMM,OAAO,GAAGC,cAAKC,OAAL,CAAaT,QAAb,EAAuB,gBAAvB,CAAhB;;AACA,QAAMU,OAAO,GAAG,MAAMC,aAAGC,QAAH,CAAYL,OAAZ,CAAtB;AACAG,EAAAA,OAAO,CAACG,IAAR,GAAeZ,WAAf;AACA,QAAMU,aAAGG,SAAH,CAAaP,OAAb,EAAsBG,OAAtB,EAA+B;AAAEK,IAAAA,MAAM,EAAE;AAAV,GAA/B,CAAN;AACA,QAAMJ,aAAGK,SAAH,CAAad,SAAb,CAAN,CANyD,CAM1B;;AAE/B,QAAMe,OAAO,CAACC,GAAR,CACJP,aAAGQ,WAAH,CAAenB,QAAf,EAAyBoB,GAAzB,CAA8BC,IAAD,IAAU;AACrC,WAAOV,aAAGW,IAAH,CAAQd,cAAKe,IAAL,CAAUvB,QAAV,EAAoBqB,IAApB,CAAR,EAAmCb,cAAKe,IAAL,CAAUrB,SAAV,EAAqBmB,IAArB,CAAnC,EAA+D;AACpEG,MAAAA,SAAS,EAAE;AADyD,KAA/D,CAAP;AAGD,GAJD,CADI,CAAN;;AAOArB,oBAAQsB,IAAR;AACD,C","sourcesContent":["import path from 'path';\nimport { fs, chalk, spinner } from '@chrissong/cli-utils';\n\n/**\n * 根据模版生成项目文件\n * @param{string} template    模版临时路径\n * @param{string} projectName 项目名称\n * @param{string} targetDir   项目文件路径\n */\nexport default async (template, projectName, targetDir) => {\n  spinner.start('📦', `生成项目 ${chalk.yellow(projectName)}...`);\n  const pkgPath = path.resolve(template, './package.json');\n  const pkgJson = await fs.readJson(pkgPath);\n  pkgJson.name = projectName;\n  await fs.writeJson(pkgPath, pkgJson, { spaces: 2 });\n  await fs.ensureDir(targetDir); // 创建本地项目\n\n  await Promise.all(\n    fs.readdirSync(template).map((file) => {\n      return fs.move(path.join(template, file), path.join(targetDir, file), {\n        overwrite: true\n      });\n    })\n  );\n  spinner.stop();\n};\n"],"file":"generateProject.js"}