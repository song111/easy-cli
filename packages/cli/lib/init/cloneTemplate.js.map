{"version":3,"sources":["../../src/init/cloneTemplate.js"],"names":["repo","branch","spinner","start","chalk","yellow","tmpdir","path","join","os","fs","remove","Promise","resolve","reject","shallow","checkout","err","stop","logger","error"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;eAEe,OAAOA,IAAP,EAAaC,MAAb,KAAwB;AACrCC,oBAAQC,KAAR,CAAc,GAAd,EAAoB,QAAOC,gBAAMC,MAAN,CAAc,GAAEL,IAAK,IAAGC,MAAO,GAA/B,CAAmC,KAA9D;;AACA,QAAMK,MAAM,GAAGC,cAAKC,IAAL,CAAUC,YAAGH,MAAH,EAAV,EAAuB,MAAvB,CAAf;;AACA,QAAMI,aAAGC,MAAH,CAAUL,MAAV,CAAN;AAEA,SAAO,IAAIM,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtC;AACA,2BAASd,IAAT,EAAeM,MAAf,EAAuB;AAAES,MAAAA,OAAO,EAAE,IAAX;AAAiBC,MAAAA,QAAQ,EAAEf;AAA3B,KAAvB,EAA6DgB,GAAD,IAAS;AACnEf,wBAAQgB,IAAR;;AACA,UAAI,CAACD,GAAL,EAAU,OAAOJ,OAAO,CAACP,MAAD,CAAd;;AACVa,uBAAOC,KAAP,CAAc,QAAQ,GAAEpB,IAAK,IAAGC,MAAO,GAAG,KAA1C;;AACAa,MAAAA,MAAM,CAACG,GAAD,CAAN;AACD,KALD;AAMD,GARM,CAAP;AASD,C","sourcesContent":["import os from 'os';\nimport path from 'path';\nimport gitclone from 'git-clone';\nimport { fs, chalk, logger, spinner } from '@chrissong/cli-utils';\n\nexport default async (repo, branch) => {\n  spinner.start('✨', `克隆模板 ${chalk.yellow(`${repo}(${branch})`)}...`);\n  const tmpdir = path.join(os.tmpdir(), 'easy');\n  await fs.remove(tmpdir);\n\n  return new Promise((resolve, reject) => {\n    debugger;\n    gitclone(repo, tmpdir, { shallow: true, checkout: branch }, (err) => {\n      spinner.stop();\n      if (!err) return resolve(tmpdir);\n      logger.error(`克隆模板 ${`${repo}(${branch})`} 失败`);\n      reject(err);\n    });\n  });\n};\n"],"file":"cloneTemplate.js"}