{"version":3,"sources":["../../src/init/cloneTemplate.js"],"names":["repo","branchName","spinner","start","chalk","yellow","tmpdir","path","join","os","fs","remove","Promise","resolve","reject","checkout","err","stop","logger","done","error"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA;;;;eAKe,OAAOA,IAAP,EAAaC,UAAb,KAA4B;AACzCC,oBAAQC,KAAR,CAAc,GAAd,EAAoB,QAAOC,gBAAMC,MAAN,CAAc,GAAEL,IAAK,IAAGC,UAAW,GAAnC,CAAuC,KAAlE;;AACA,QAAMK,MAAM,GAAGC,cAAKC,IAAL,CAAUC,YAAGH,MAAH,EAAV,EAAuB,MAAvB,CAAf;;AACA,QAAMI,aAAGC,MAAH,CAAUL,MAAV,CAAN;AACA,SAAO,IAAIM,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtC,2BAASd,IAAT,EAAeM,MAAf,EAAuB;AAAES,MAAAA,QAAQ,EAAEd;AAAZ,KAAvB,EAAkDe,GAAD,IAAS;AACxDd,wBAAQe,IAAR;;AACA,UAAI,CAACD,GAAL,EAAU;AACRE,yBAAOC,IAAP,CAAa,QAAQ,GAAEnB,IAAK,IAAGC,UAAW,GAAG,KAA7C;;AACA,eAAOY,OAAO,CAACP,MAAD,CAAd;AACD,OAHD,MAGO;AACLY,yBAAOE,KAAP,CAAc,QAAQ,GAAEpB,IAAK,IAAGC,UAAW,GAAG,KAA9C;;AACA,eAAOa,MAAM,CAACE,GAAD,CAAb;AACD;AACF,KATD;AAUD,GAXM,CAAP;AAYD,C","sourcesContent":["import os from 'os';\r\nimport path from 'path';\r\nimport gitclone from 'git-clone';\r\nimport { fs, chalk, logger, spinner } from '@chrissong/cli-utils';\r\n\r\n/** 克隆模版到临时文件夹\r\n * @param{string} repo      git地址\r\n * @param{string} branchName    分支名称\r\n * */\r\n\r\nexport default async (repo, branchName) => {\r\n  spinner.start('✨', `克隆模板 ${chalk.yellow(`${repo}(${branchName})`)}...`);\r\n  const tmpdir = path.join(os.tmpdir(), 'easy');\r\n  await fs.remove(tmpdir);\r\n  return new Promise((resolve, reject) => {\r\n    gitclone(repo, tmpdir, { checkout: branchName }, (err) => {\r\n      spinner.stop();\r\n      if (!err) {\r\n        logger.done(`克隆模板 ${`${repo}(${branchName})`} 成功`);\r\n        return resolve(tmpdir);\r\n      } else {\r\n        logger.error(`克隆模板 ${`${repo}(${branchName})`} 失败`);\r\n        return reject(err);\r\n      }\r\n    });\r\n  });\r\n};\r\n"],"file":"cloneTemplate.js"}