{"version":3,"sources":["../src/index.js"],"names":["configBabel","configs","plugin","opts","defaultOpts","push","api","options","babelPresetEnvOpts","babelPresetReactOpts","babelPluginTransformRuntimeOpts","babelPluginProposalDecoratorsOpts","babelPluginProposalClassPropertiesOpts","babelPluginProposalExportDefaultFromOpts","babelPluginProposalExportNamespaceFromOpts","presets","plugins","corejs","helpers","regenerator","useESModules","legacy","loose"],"mappings":";;;;;;;;;;;;;;;AAAA;;;;;;;;AAQA,SAASA,WAAT,CAAsBC,OAAtB,EAA+BC,MAA/B,EAAuCC,IAAvC,EAA6CC,WAA7C,EAA0D;AACxD,MAAID,IAAI,KAAK,KAAb,EAAoB,OAAOF,OAAP;AACpBC,EAAAA,MAAM,GAAG,CAACA,MAAD,kCAAcE,WAAd,GAA8BD,IAA9B,EAAT;AACAF,EAAAA,OAAO,CAACI,IAAR,CAAaH,MAAb;AACA,SAAOD,OAAP;AACD;;eAEc,CAACK,GAAD,EAAMC,OAAO,GAAG,EAAhB,KAAuB;AACpC;AAEA,QAAM;AACJ,yBAAqBC,kBADjB;AAEJ,2BAAuBC,oBAFnB;AAGJ,uCAAmCC,+BAH/B;AAIJ,yCAAqCC,iCAJjC;AAKJ,+CAA2CC,sCALvC;AAMJ,kDAA8CC,wCAN1C;AAOJ,oDAAgDC;AAP5C,MAQFP,OARJ;AAUA,QAAMQ,OAAO,GAAG,EAAhB;AACA,QAAMC,OAAO,GAAG,EAAhB,CAdoC,CAgBpC;;AACAhB,EAAAA,WAAW,CAACe,OAAD,EAAU,mBAAV,EAA+BP,kBAA/B,CAAX,CAjBoC,CAmBpC;;AACAR,EAAAA,WAAW,CAACe,OAAD,EAAU,qBAAV,EAAiCN,oBAAjC,CAAX,CApBoC,CAsBpC;;AACAT,EAAAA,WAAW,CAACgB,OAAD,EAAU,iCAAV,EAA6CN,+BAA7C,EAA8E;AACvFO,IAAAA,MAAM,EAAE,KAD+E;AAEvFC,IAAAA,OAAO,EAAE,IAF8E;AAGvFC,IAAAA,WAAW,EAAE,IAH0E;AAIvFC,IAAAA,YAAY,EAAE;AAJyE,GAA9E,CAAX;AAOA;;;;;;AAKApB,EAAAA,WAAW,CAACgB,OAAD,EAAU,mCAAV,EAA+CL,iCAA/C,EAAkF;AAC3FU,IAAAA,MAAM,EAAE;AADmF,GAAlF,CAAX,CAnCoC,CAuCpC;;AACArB,EAAAA,WAAW,CAACgB,OAAD,EAAU,yCAAV,EAAqDJ,sCAArD,EAA6F;AACtGU,IAAAA,KAAK,EAAE;AAD+F,GAA7F,CAAX,CAxCoC,CA4CpC;;AACAtB,EAAAA,WAAW,CAACgB,OAAD,EAAU,4CAAV,EAAwDH,wCAAxD,CAAX,CA7CoC,CA+CpC;;AACAb,EAAAA,WAAW,CAACgB,OAAD,EAAU,8CAAV,EAA0DF,0CAA1D,CAAX;AAEA,SAAO;AACLC,IAAAA,OADK;AAELC,IAAAA;AAFK,GAAP;AAID,C","sourcesContent":["/**\n * 配置babel的presets和plugins\n * 如果opts为false则不添加config到配置中去\n * @param {*} configs presets或者plugins\n * @param {*} plugin 插件名称\n * @param {*} opts 传入配置\n * @param {*} defaultOpts 默认的配置\n */\nfunction configBabel (configs, plugin, opts, defaultOpts) {\n  if (opts === false) return configs\n  plugin = [plugin, { ...defaultOpts, ...opts }]\n  configs.push(plugin)\n  return configs\n}\n\nexport default (api, options = {}) => {\n  // api.assertVersion(7)\n\n  const {\n    '@babel/preset-env': babelPresetEnvOpts,\n    '@babel/preset-react': babelPresetReactOpts,\n    '@babel/plugin-transform-runtime': babelPluginTransformRuntimeOpts,\n    '@babel/plugin-proposal-decorators': babelPluginProposalDecoratorsOpts,\n    '@babel/plugin-proposal-class-properties': babelPluginProposalClassPropertiesOpts,\n    '@babel/plugin-proposal-export-default-from': babelPluginProposalExportDefaultFromOpts,\n    '@babel/plugin-proposal-export-namespace-from': babelPluginProposalExportNamespaceFromOpts\n  } = options\n\n  const presets = []\n  const plugins = []\n\n  // @babel/preset-env\n  configBabel(presets, '@babel/preset-env', babelPresetEnvOpts)\n\n  // @babel/preset-react\n  configBabel(presets, '@babel/preset-react', babelPresetReactOpts)\n\n  // @babel/plugin-transform-runtime\n  configBabel(plugins, '@babel/plugin-transform-runtime', babelPluginTransformRuntimeOpts, {\n    corejs: false,\n    helpers: true,\n    regenerator: true,\n    useESModules: true\n  })\n\n  /**\n   * @babel/plugin-proposal-decorators\n   * 与@babel/plugin-proposal-class-properties同时配置时的要求\n   * https://babeljs.io/docs/en/babel-plugin-proposal-decorators#legacy\n   */\n  configBabel(plugins, '@babel/plugin-proposal-decorators', babelPluginProposalDecoratorsOpts, {\n    legacy: true\n  })\n\n  // @babel/plugin-proposal-class-properties\n  configBabel(plugins, '@babel/plugin-proposal-class-properties', babelPluginProposalClassPropertiesOpts, {\n    loose: true\n  })\n\n  // @babel/plugin-proposal-export-default-from\n  configBabel(plugins, '@babel/plugin-proposal-export-default-from', babelPluginProposalExportDefaultFromOpts)\n\n  // @babel/plugin-proposal-export-namespace-from\n  configBabel(plugins, '@babel/plugin-proposal-export-namespace-from', babelPluginProposalExportNamespaceFromOpts)\n\n  return {\n    presets,\n    plugins\n  }\n}\n"],"file":"index.js"}