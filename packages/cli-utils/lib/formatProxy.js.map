{"version":3,"sources":["../src/formatProxy.js"],"names":["formatProxy","proxy","Array","isArray","Object","prototype","hasOwnProperty","call","keys","map","key","context","replace","target"],"mappings":";;;;;;;;;;;;;;;AAAA;;;;;AAKe,SAASA,WAAT,CAAsBC,KAAtB,EAA6B;AAC1C;;;;AAIA,MAAI,CAACC,KAAK,CAACC,OAAN,CAAcF,KAAd,CAAL,EAA2B;AACzB,QAAIG,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCN,KAArC,EAA4C,QAA5C,CAAJ,EAA2D;AACzDA,MAAAA,KAAK,GAAG,CAACA,KAAD,CAAR;AACD,KAFD,MAEO;AACLA,MAAAA,KAAK,GAAGG,MAAM,CAACI,IAAP,CAAYP,KAAZ,EAAmBQ,GAAnB,CAAuB,UAAAC,GAAG,EAAI;AACpC;AACA,YAAMC,OAAO,GAAGD,GAAG,CAACE,OAAJ,CAAY,MAAZ,EAAoB,IAApB,EAA0BA,OAA1B,CAAkC,OAAlC,EAA2C,EAA3C,CAAhB;;AAEA,YAAI,OAAOX,KAAK,CAACS,GAAD,CAAZ,KAAsB,QAA1B,EAAoC;AAClC,iBAAO;AACLC,YAAAA,OAAO,EAAPA,OADK;AAELE,YAAAA,MAAM,EAAEZ,KAAK,CAACS,GAAD;AAFR,WAAP;AAID,SALD,MAKO;AACL,iDACKT,KAAK,CAACS,GAAD,CADV;AAEEC,YAAAA,OAAO,EAAPA;AAFF;AAID;AACF,OAfO,CAAR;AAgBD;AACF;;AACD,SAAOV,KAAP;AACD","sourcesContent":["/**\r\n * 格式化webpack代理配置\r\n * @param {Array|Object} proxy\r\n * @return {Array}\r\n */\r\nexport default function formatProxy (proxy) {\r\n  /**\r\n   * webpack-dev-server源码proxy格式化方式\r\n   * https://github.com/webpack/webpack-dev-server/blob/master/lib/Server.js#L228-L254\r\n   */\r\n  if (!Array.isArray(proxy)) {\r\n    if (Object.prototype.hasOwnProperty.call(proxy, 'target')) {\r\n      proxy = [proxy]\r\n    } else {\r\n      proxy = Object.keys(proxy).map(key => {\r\n        // For backwards compatibility reasons.\r\n        const context = key.replace(/^\\*$/, '**').replace(/\\/\\*$/, '')\r\n\r\n        if (typeof proxy[key] === 'string') {\r\n          return {\r\n            context,\r\n            target: proxy[key]\r\n          }\r\n        } else {\r\n          return {\r\n            ...proxy[key],\r\n            context\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n  return proxy\r\n}\r\n"],"file":"formatProxy.js"}